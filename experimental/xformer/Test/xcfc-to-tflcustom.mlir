// RUN: xcore-opt --mlir-io %s --xcore-translate-to-customop | FileCheck %s

func @main(%arg0: tensor<1x4x8x1x!quant.uniform<i8:f32, 0.0078160231932997704>>) -> tensor<1x32x!quant.uniform<i8:f32, 0.037329975515604019:-13>> attributes {tf.entry_function = {inputs = "flatten_input_int8", outputs = "Identity_int8"}} {
  %0 = "tfl.pseudo_qconst"() {qtype = tensor<32x32x!quant.uniform<i8<-127:127>:f32, 0.0078694447875022888>>, value = dense<"0xA12629640DDADF56E8F0F0662BD5AB7F712F899A1581BA32ED60EB8812D4C79012DA099810074150A97976BC5B7849CA73D6A12CE4EFDD9EF6FAD4B9B3A6B56ACD28DD27FD3E6275047BA121EF8C242675A91F26A6E6223DAE42B8D98AF8D76C0C5673E9FACFDB57455A779FAFA53C4C1EF2781557961967D9CC4719643F329E384D5FD7B421CD6E345193AED9ACB64B0AC4D6A216693CB14DA1F24EAD2AC04F49DC1D57901992FA8411159CB7AC02BD032F05BF786BBFE4AEA22770F4645E98CFE60035A53A9F8BCA3207D03DF24A7A85B717CAA5664DDC9F911E1A6ADFEDA8FBFC0A52E473560478EA99A87A20FE2B65C984ADF24589888BC6C577617B3EBA2796C910ABA21437FDB3C6AE08F4834A6F4B93CD8E5A5C53CB3CBE765BCECAB1A0EC823D84254D18E1D1ABC81D8BBED668C8E8F1DDEE60F3E1683735A387042FDD82AB8A9791DDD458838A3D5F763D85A21987A4E61A3F463DCC7E0683D1DB55BF7C13A6C4F525D3576857D100237EF45FA5F5A26634855D6B8ADD930B0BDF04BB12D5632A896D039F509714AF50AAD432A28C33875025094DDC0C42A270827905A8F6F649769B51B64DB989EA1FB11CAD8D2D2C43BBDF5EF01C3E82E99947AA5E16578BC085F8F55BAB823505DC972C207251FC66F6A1A2B37F2BE5F904E1CACA7E3D18FC1C861BBE0DB05513CC16B537DA2A224930F97E8863D84BE2A1F350FE8148A42DF0A63557023FBB36B40AD8427C91D322BE77E332C44723EA16017C2C0E694AE063E6E5E8DB5294E62503769D4F0A96BA587D8ECF09947C066A84B3F1B8A56FAFDB32DFB41D52F679B03CADCBEA5944D5763B4DEC8F3E6640A68D2CFD9708A7E90647FB4DEC53BE365165253114814E1FDD3758DF9A9DF430E31B9F4E34364DA4BE101612C1D7CA3D5252661DA5F6A8B52CE60B6AFFEE86433B44E2651535C7634BCDD41C0A19A645A712BCDB06B5ECF25D72496ED2B6B54441DAC3238D4D8CA7945B5450ADBD2B1687062F3806D65BC920F8834386392445555CC6001123685FA99611C5FDB982EA2CD6307D965A8A202E0BCBD32FAFEC355CAADCFCF732BC0A3D6BAE470C327371B65807FE9A22F96303BCF7152B72EF4F799EE340418CB1444671C475206D8862103F55738F8A9CBCC9A55C840E28668C462ABF4EFE49C01939300440EB0C99B49B6A4E1503C07264D284BA96485A8C4E3A8C07FED81937596AF5BA5E2366C3058F7C764BABE06BD67178F055957BD0F1F2CAB1EB609873D45A74561D8241C2FF13E0EFF64D5250A8CE2260FCBE8219047DB7ED6BA2FA1B4D249A7E407CEF759B79A93E99E13B0F053347230BA4A81A5EE85707CE2B4FB830AC10DEDC496CB1CA5442EA2FE9AF9967000159BF2F82A6BFEF30D5693FE798AB3AE5E27987EA9373F427CB62B15E8933C3C6B6BA96242BAFEA9917"> : tensor<32x32xi8>} : () -> tensor<32x32x!quant.uniform<i8<-127:127>:f32, 0.0078694447875022888>>
  %1 = "tfl.pseudo_qconst"() {qtype = tensor<32x!quant.uniform<i32:f32, 6.1507766076829284E-5>>, value = dense<[12671, -12241, 8840, 6018, 4691, -13740, 8148, 4067, -16007, 1746, 11021, -2062, 14847, 8417, 12891, -1799, -5711, -5060, 13417, 9017, 12993, 139, -1615, 3055, 7109, 13545, 15667, -4673, -12692, 2486, -9783, 2882]> : tensor<32xi32>} : () -> tensor<32x!quant.uniform<i32:f32, 6.1507766076829284E-5>>

//CHECK: tfl.custom
//CHECK-SAME: XC_fc
//CHECK-SAME: 0x696C6C6567616C5F706172616D730001100101010104022401  
  %2 = "xc.fc"(%arg0, %0, %1) {fused_activation_function = "NONE", keep_num_dims = true, weights_format = "DEFAULT"} : (tensor<1x4x8x1x!quant.uniform<i8:f32, 0.0078160231932997704>>, tensor<32x32x!quant.uniform<i8<-127:127>:f32, 0.0078694447875022888>>, tensor<32x!quant.uniform<i32:f32, 6.1507766076829284E-5>>) -> tensor<1x32x!quant.uniform<i8:f32, 0.037329975515604019:-13>>
  return %2 : tensor<1x32x!quant.uniform<i8:f32, 0.037329975515604019:-13>>
}

